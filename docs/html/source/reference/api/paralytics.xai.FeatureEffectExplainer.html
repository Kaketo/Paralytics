

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FeatureEffectExplainer &mdash; Paralytics 0.3.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Preprocessing" href="../preprocessing.html" />
    <link rel="prev" title="ExplainerMixin" href="paralytics.xai.ExplainerMixin.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Paralytics
          

          
          </a>

          
            
            
              <div class="version">
                0.3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../readme.html">Paralytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../example.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generals.html">Generals</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../xai.html">Explainable AI</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="paralytics.xai.ExplainerMixin.html">ExplainerMixin</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">FeatureEffectExplainer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preprocessing.html">Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decorators.html">Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exceptions.html">Exceptions &amp; Warnings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Paralytics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="../xai.html">Explainable AI</a> &raquo;</li>
        
      <li>FeatureEffectExplainer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/source/reference/api/paralytics.xai.FeatureEffectExplainer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="featureeffectexplainer">
<h1>FeatureEffectExplainer<a class="headerlink" href="#featureeffectexplainer" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="paralytics.xai.FeatureEffectExplainer">
<em class="property">class </em><code class="sig-prename descclassname">paralytics.xai.</code><code class="sig-name descname">FeatureEffectExplainer</code><span class="sig-paren">(</span><em class="sig-param">estimator</em>, <em class="sig-param">features</em>, <em class="sig-param">dtypes=None</em>, <em class="sig-param">sample_size=None</em>, <em class="sig-param">estimation_values=100</em>, <em class="sig-param">n_jobs=None</em>, <em class="sig-param">random_state=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/paralytics/xai/feature_effect.html#FeatureEffectExplainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.BaseEstimator</span></code>, <a class="reference internal" href="paralytics.xai.ExplainerMixin.html#paralytics.xai.ExplainerMixin" title="paralytics.xai.base.ExplainerMixin"><code class="docutils literal notranslate"><span class="pre">paralytics.xai.ExplainerMixin</span></code></a></p>
<p>Visualizes the effect of one or two features on the prediction.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>estimator: TODO</strong></dt><dd></dd>
<dt><strong>features: str or list of length at most 2</strong></dt><dd><p>TODO: Grid features.</p>
</dd>
<dt><strong>dtypes: dict, optional (default=None)</strong></dt><dd><p>Types of the passed features. Possible values: ‘numeric’ or ‘category’.
Has to be passed as a dictionary where the key is the name of the
feature for which data type is specified. Left by default it is
determined automatically during <cite>fit</cite> method execution.</p>
<p>Based on this parameter the appropriate explainers are selected.</p>
</dd>
<dt><strong>sample_size: int or float, optional (default=None)</strong></dt><dd><p>TODO</p>
</dd>
<dt><strong>estimation_values: int or dict, optional (default=100)</strong></dt><dd><p>Declares number of values to generate for the grid feature or explicitly
specifies those values. When passed as:</p>
<ul>
<li><p><cite>int</cite>:</p>
<p>Automatically detects whether the grid feature is numeric and if:</p>
<ul>
<li><p><cite>True</cite>:</p>
<p>Generates the set of values from the lowest to the highest value
recorded in the data set passed to the fit method with the
interspace depending on the number of values to generate specified
in the <cite>n_estimated_values</cite> parameter.</p>
</li>
<li><p><cite>False</cite>:</p>
<p>Takes all of the explained feature’s unique values and imputes
into grid feature. When you need to consider only a subset of the
unique categories, pass them to the dictionary with a key being
name of the feature.</p>
</li>
</ul>
<p>When two features are specified then takes the given value for both
of them.</p>
</li>
<li><p><cite>dict</cite>:</p>
<p>Manually specify the values or pass separately for every feature how
many values to generate. Dictionary specification:</p>
<ul>
<li><p><cite>key</cite>:</p>
<p>Feature name passed to the <cite>features</cite> parameter.</p>
</li>
<li><p><cite>value</cite>:</p>
<p>Integer indicating how many values generate between the lowest and
the highest value recorded in the data set or array of values with
which grid feature will be imputed to make predictions for the
synthetic data set.</p>
</li>
</ul>
</li>
</ul>
</dd>
<dt><strong>n_jobs: TODO</strong></dt><dd></dd>
<dt><strong>random_state: int, optional (default=None)</strong></dt><dd><p>Seed for the sample generator. Used when <cite>sample_size</cite> is not None.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p>[1] C. Molnar, <a class="reference external" href="https://christophm.github.io/interpretable-ml-book/pdp.html">Interpretable Machine Learning</a>, 2019</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>dtypes_: list</strong></dt><dd><p>Actual data types of grid features after evaluation if the automatic
determination was specified. Otherwise is equal to dtypes but converted
to a list where order ise the same as the order of passed features.</p>
</dd>
<dt><strong>estimation_values_: list</strong></dt><dd><p>Actual estimation values used to calculate dependency plots. The order
of values is the same as the order of passed features.</p>
</dd>
<dt><strong>base_values_: np.array, shape = (n_samples, n_grid_features)</strong></dt><dd><p>TODO</p>
</dd>
<dt><strong>grid_values_: np.array, shape = (n_grid_values, n_grid_features)</strong></dt><dd><p>TODO</p>
</dd>
<dt><strong>y_grid_predictions_: np.array, shape = (n_samples, n_grid_values)</strong></dt><dd><p>Array of predictions for every grid values set where rows are
predictions for consecutive observations.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Attributes Summary</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.CORRECT_DTYPES" title="paralytics.xai.FeatureEffectExplainer.CORRECT_DTYPES"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CORRECT_DTYPES</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.dtypes" title="paralytics.xai.FeatureEffectExplainer.dtypes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dtypes</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.estimation_values" title="paralytics.xai.FeatureEffectExplainer.estimation_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">estimation_values</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.features" title="paralytics.xai.FeatureEffectExplainer.features"><code class="xref py py-obj docutils literal notranslate"><span class="pre">features</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.explain" title="paralytics.xai.FeatureEffectExplainer.explain"><code class="xref py py-obj docutils literal notranslate"><span class="pre">explain</span></code></a>(self[, pdplot, iceplot, mplot, …])</p></td>
<td><p>Explains the features effect with use of the selected methods.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.fit" title="paralytics.xai.FeatureEffectExplainer.fit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fit</span></code></a>(self, X[, y])</p></td>
<td><p>Fits creation of synthetic data to X.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.predict_grid_features" title="paralytics.xai.FeatureEffectExplainer.predict_grid_features"><code class="xref py py-obj docutils literal notranslate"><span class="pre">predict_grid_features</span></code></a>(self, X)</p></td>
<td><p>Predicts previously substituting grid features with generated values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#paralytics.xai.FeatureEffectExplainer.select_sample" title="paralytics.xai.FeatureEffectExplainer.select_sample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select_sample</span></code></a>(self, X)</p></td>
<td><p>Selects sample data with <cite>sample_size</cite> number of samples.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="attribute">
<dt id="paralytics.xai.FeatureEffectExplainer.CORRECT_DTYPES">
<code class="sig-name descname">CORRECT_DTYPES</code><em class="property"> = {'category', 'numeric'}</em><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.CORRECT_DTYPES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="paralytics.xai.FeatureEffectExplainer.dtypes">
<code class="sig-name descname">dtypes</code><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.dtypes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="paralytics.xai.FeatureEffectExplainer.estimation_values">
<code class="sig-name descname">estimation_values</code><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.estimation_values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="paralytics.xai.FeatureEffectExplainer.features">
<code class="sig-name descname">features</code><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="method">
<dt id="paralytics.xai.FeatureEffectExplainer.explain">
<code class="sig-name descname">explain</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">pdplot=True</em>, <em class="sig-param">iceplot=False</em>, <em class="sig-param">mplot=False</em>, <em class="sig-param">aleplot=False</em>, <em class="sig-param">automatic_layout=True</em>, <em class="sig-param">centers=None</em>, <em class="sig-param">iceplot_thresh=None</em>, <em class="sig-param">neighborhoods=0.1</em>, <em class="sig-param">pdline_params=None</em>, <em class="sig-param">iceline_params=None</em>, <em class="sig-param">mline_params=None</em>, <em class="sig-param">aleline_params=None</em>, <em class="sig-param">contour_params=None</em>, <em class="sig-param">contourf_params=None</em>, <em class="sig-param">bar_params=None</em>, <em class="sig-param">imshow_params=None</em>, <em class="sig-param">text_params=None</em>, <em class="sig-param">verbose=True</em>, <em class="sig-param">ax=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/paralytics/xai/feature_effect.html#FeatureEffectExplainer.explain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.explain" title="Permalink to this definition">¶</a></dt>
<dd><p>Explains the features effect with use of the selected methods.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>pdplot: bool, optional (default=True)</strong></dt><dd><p>Defines if Partial Dependence Plot should be displayed. It
visualizes marginal effect that grid features have on predictions
with use of the Monte Carlo method.</p>
</dd>
<dt><strong>iceplot: bool, optional (default=False)</strong></dt><dd><p>Defines whether Individual Conditional Expectation plots should be
displayed. Only possible if a single numeric feature is explained.</p>
</dd>
<dt><strong>mplot: bool, optional (default=False)</strong></dt><dd><p>Defines if Marginal Plot should be displayed. It visualizes
conditional effect that grid features have on predictions. Only
possible for numeric features.</p>
</dd>
<dt><strong>aleplot: bool, optional (default=False)</strong></dt><dd><p>Defines if Accumulated Local Effects Plot should be displayed. It
visualizes accumulated differences between predictions based on the
conditional distribution of the feature.</p>
</dd>
<dt><strong>automatic_layout: bool, optional (default=True)</strong></dt><dd><p>Specified whether format the plots in the automatic manner including
ticks adjustment, axis signing, text formatting etc. or leave
the plot in the raw state.</p>
</dd>
<dt><strong>centers: int or float or string or list, optional (default=None)</strong></dt><dd><p>Defines the center value that all of the predictions will be
compared to and displayed as a difference in the prediction
to this point. By default no centering is done. If:</p>
<ul>
<li><p><cite>min</cite>:</p>
<p>Specifies that minimum of the grid features will be used for
centering.</p>
</li>
</ul>
<p>Should be passed as the list of values mentioned above if two
features are passed to explanation, in the same order in which the
features are given.</p>
</dd>
<dt><strong>iceplot_thresh: int or float, optional (default=None)</strong></dt><dd><p>Declares how many observations to take to visualize the ICE plots.
If <cite>int</cite>, gives the exact number of observations, if <cite>float</cite>, gives
a fraction of all observations to be taken.</p>
</dd>
<dt><strong>neighborhoods: int or float or list, optional (default=.1)</strong></dt><dd><p>Neighborhood of the value to determine the interval
<cite>[current_value - neighborhood, current_value + neighborhood]</cite>
for which predictions will be averaged. Taken under consideration
only when <cite>mplot == True</cite> or <cite>aleplot == True</cite>. If:</p>
<ul>
<li><p><cite>int</cite>:</p>
<p>Absolute value that will be deducted and added from the current
value to determine the interval for synthetic data generation.</p>
</li>
<li><p><cite>float</cite>:</p>
<p>Fraction of the difference between biggest and smallest value in
the variable to calculate the interval boundaries.</p>
</li>
</ul>
<p>Should be passed as the list of values mentioned above if two
features are passed to explanation, in the same order in which the
features are given.</p>
</dd>
<dt><strong>{pd, ice, m, ale}plot_params: dicts, optional (default=None)</strong></dt><dd><p>Keyword arguments for underlying plotting functions.</p>
</dd>
<dt><strong>verbose: TODO</strong></dt><dd></dd>
<dt><strong>ax: TODO</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>TODO</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="paralytics.xai.FeatureEffectExplainer.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">X</em>, <em class="sig-param">y=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/paralytics/xai/feature_effect.html#FeatureEffectExplainer.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits creation of synthetic data to X.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>X: pandas.DataFrame</strong></dt><dd><p>TODO</p>
</dd>
<dt><strong>y: ignore</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>self: object</dt><dd><p>Returns the instance itself.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="paralytics.xai.FeatureEffectExplainer.predict_grid_features">
<code class="sig-name descname">predict_grid_features</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">X</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/paralytics/xai/feature_effect.html#FeatureEffectExplainer.predict_grid_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.predict_grid_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Predicts previously substituting grid features with generated values.</p>
<p>For every combination in the cartesian product of unique grid features
generates a temporary DataFrame containing this set of values across the
whole grid features leaving the rest of the features unchanged. Then
makes prediction for this synthetic DataFrame.</p>
<p>Returns list of predictions for every synthetic DataFrame and list of
grid values which replaced the original values across the grid features
to create these DataFrames for prediction.</p>
</dd></dl>

<dl class="method">
<dt id="paralytics.xai.FeatureEffectExplainer.select_sample">
<code class="sig-name descname">select_sample</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">X</em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/paralytics/xai/feature_effect.html#FeatureEffectExplainer.select_sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#paralytics.xai.FeatureEffectExplainer.select_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects sample data with <cite>sample_size</cite> number of samples.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../preprocessing.html" class="btn btn-neutral float-right" title="Preprocessing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="paralytics.xai.ExplainerMixin.html" class="btn btn-neutral float-left" title="ExplainerMixin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Mateusz Zakrzewski

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>